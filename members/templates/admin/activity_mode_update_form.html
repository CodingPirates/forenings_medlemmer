{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrahead %}{{ block.super }}
<script type="text/javascript" src="{% url 'admin:jsi18n' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />
{{ form.media }}
{{ media }}
{% endblock %}

{% block extrastyle %}{{ block.super }}
<script type="text/javascript" src="{% static "admin/js/core.js" %}"></script>
<script type="text/javascript" src="{% static "admin/js/vendor/jquery/jquery.min.js" %}"></script>
<script type="text/javascript" src="{% static "admin/js/jquery.init.js" %}"></script>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' 'members' %}">Members</a>
&rsaquo; <a href="">Afdelinger</a>
</div>
{% endblock %}

{% block content_title %}<h1>Opdater aktivitetsform</h1>{% endblock %}

{% block content %}
<div id="content-main">
  <form action="" method="post">
    <div>
      <fieldset class="module aligned">
        <h2>Bekræft opdatering</h2>
        <div class="description">
          <p><b>Du er ved at opdatere aktivitetsform for følgende afdelinger:</b></p>
          <table class="adminlist" style="width:100%; border-collapse:collapse;">
            <thead>
              <tr>
                <th>Navn</th>
                <th>Forening</th>
                <th>Aktuel aktivitetsform</th>
              </tr>
            </thead>
            <tbody>
              {% for dept in departments %}
                <tr>
                  <td>{{ dept.name }}</td>
                  <td>{{ dept.union.name }}</td>
                  <td>{% if dept.activity_mode %}{{ dept.activity_mode.name }}{% else %}-{% endif %}</td>
                </tr>
                <input type="hidden" name="_selected_action" value="{{ dept.pk }}" />
              {% endfor %}
            </tbody>
          </table>
        </div>

        {% csrf_token %}
        <div class="form-row">
          {{ form.activity_mode.label_tag }}
          {{ form.activity_mode }}
        </div>

        {% if error_message %}
          <div style="color: red; font-weight: bold;">{{ error_message }}</div>
        {% endif %}

        <div class="submit-row">
          <p class="deletelink-box"><a href="#" id="abort" style="background-color: rgb(199, 183, 0); color: black; float: right;" class="deletelink">Fortryd</a></p>
          <p><input class="default" style="background-color: green; color: white; float: right;" type="submit" value="Opdater aktivitetsform"></p>
        </div>
      </fieldset>
    </div>
  </form>
</div>

<script type="text/javascript">
    document.getElementById("abort").addEventListener("click", () => {
        history.back();
    });
</script>

{% endblock %}
