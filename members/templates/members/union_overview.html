<!DOCTYPE html>
{% extends 'members/base.html' %}
<html lang="da">
  <head>
    {% load staticfiles %}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    {% load bootstrap4 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}

    <script type="text/javascript">
    $(document).ready(function() {
        var southEast = L.latLng(54.91711327768886, 8.76734733581543);
        var northEast = L.latLng(58.038693522227945, 14.979954628418003);
        var kort = L.map('kort').fitBounds([southEast, northEast]);
        L.tileLayer('https://api.mapbox.com/styles/v1/codingpirates/cjdaaa7yt3qts2rrwzpsx5ysw/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY29kaW5ncGlyYXRlcyIsImEiOiJjamRhN3JtZHgxamphMzNvMHpraTJra2J1In0.lVqzzzCf9gHneicqDONuaw', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            accessToken: 'pk.eyJ1IjoiY29kaW5ncGlyYXRlcyIsImEiOiJjamRhOXM1ZGIwdm04MnlvMnQ5dDBsdWpkIn0.NMaydnMG6m8OBpJhUbNgzg'
        }).addTo(kort);
        {% for union in unions %}
            var marker{{forloop.counter}} = L.marker([{{union.address.latitude}},{{union.address.longtitude}}]).addTo(kort);
            marker{{forloop.counter}}.bindPopup('{{union.html | safe}}');
                {% endif %}
             {% endfor %}
        {% endfor %}
    });
    </script>
  </head>

  <body>
    <div style="height:500px;" id="kort"></div>
    <br>
    <div class="container">
          <div class="row">
            {% for union in unions %}
              <div class="col-sm-4 col-centered">
                  {{union.html | safe}}
              </div>
              {% if forloop.counter|divisibleby:"3" %}
                </div>
                <br>
                <div class="row">
              {% endif %}
            {% endfor %}
            </div>
        {% endfor %}
    </div>
  </body>
</html>
